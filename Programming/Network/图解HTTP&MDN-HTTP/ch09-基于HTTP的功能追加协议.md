## SPDY

- 目的：降低网页的加载时间

### 特点

- 通过优先级和多路复用，只需要建立一个 TCP 连接即可传送资源
	- 多路复用：一条高速通道被多条信道使用(时分，频分，码分)
- 应用 TLS 加密
- 传输内容也均以 gzip 或 DEFLATE 格式压缩
- 服务端推送
	- 服务器想浏览器发送比客户端请求的更多的数据
	- 允许服务器直接提供浏览器渲染页面所需资源，而无须浏览器在收到、解析页面后再提起一轮请求，节约了加载时间
- 修复队头阻塞问题

### 队头阻塞

- 一种性能受限的现象
- 原因：
	- 数据只在一条链路上传输
	- 数据由顺序要求

#### TCP队头阻塞

- 解释
	- 发生在一个TCP分节丢失，导致其后续分节不按序到达接收端的时候
	- 客户端将保持已到达的不按序的所有数据，直至丢失的分节重传
	- 这样会延缓其他资源的传输，因为之后到达的数据是无序的
- 解决：换协议，quic或者udp

#### HTTP队头阻塞

- 解释：服务器需要按请求顺序响应，因此，如果有一个响应延迟了，后面的都会延迟
- 解决：HTTP/2的消息——帧机制

### HTTP/2

- SPDY是HTTP/2的前身，因此基本与SPDY相同
- 与HTTP/1.1比较
	- 多路复用
	- 强制压缩
	- 服务端推送
- 新特性
	- HPACK算法，对HTTP头部进行压缩
	- 服务端推送
	- 消息——帧机制
		- 有别于HTTP/1.1的明文传输，HTTP/2将一个TCP连接分为若干个流
		- 流中可以传输消息
		- 消息由若干个二进制帧组成，每个帧都有一个序号

## WebSocket

- 建立在HTTP协议基础上的全双工通信协议
- 特点
	- 全双工
	- 减少通信量：持久连接，首部减小
- 一次握手
	- 建立HTTP通信之后，客户端发送带有`Upgrade`的请求
	- 服务端返回 102 的响应，即可建立 WebSocket 连接
- 通信时使用 WebSocket 的数据帧，而不使用HTTP的
